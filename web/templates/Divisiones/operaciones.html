{% extends "layouts/header-main.html" %} {% block content %}
<div class="general-dashboard">
  <div class="div-user-name username-space">
    <h3 class="division-title">Operaciones</h3>
    <section class="user-name">
      <p>{{ jerarquia }} {{ nombres }} {{ apellidos }} / {{ user.user }}</p>
      <svg
        width="30px"
        height="30px"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
        <g
          id="SVGRepo_tracerCarrier"
          stroke-linecap="round"
          stroke-linejoin="round"
        ></g>
        <g id="SVGRepo_iconCarrier">
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M12.0001 1.25C9.37678 1.25 7.25013 3.37665 7.25013 6C7.25013 8.62335 9.37678 10.75 12.0001 10.75C14.6235 10.75 16.7501 8.62335 16.7501 6C16.7501 3.37665 14.6235 1.25 12.0001 1.25ZM8.75013 6C8.75013 4.20507 10.2052 2.75 12.0001 2.75C13.7951 2.75 15.2501 4.20507 15.2501 6C15.2501 7.79493 13.7951 9.25 12.0001 9.25C10.2052 9.25 8.75013 7.79493 8.75013 6Z"
            fill="#000000"
          ></path>
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M12.0001 12.25C9.68658 12.25 7.55506 12.7759 5.97558 13.6643C4.41962 14.5396 3.25013 15.8661 3.25013 17.5L3.25007 17.602C3.24894 18.7638 3.24752 20.222 4.52655 21.2635C5.15602 21.7761 6.03661 22.1406 7.22634 22.3815C8.4194 22.6229 9.97436 22.75 12.0001 22.75C14.0259 22.75 15.5809 22.6229 16.7739 22.3815C17.9637 22.1406 18.8443 21.7761 19.4737 21.2635C20.7527 20.222 20.7513 18.7638 20.7502 17.602L20.7501 17.5C20.7501 15.8661 19.5807 14.5396 18.0247 13.6643C16.4452 12.7759 14.3137 12.25 12.0001 12.25ZM4.75013 17.5C4.75013 16.6487 5.37151 15.7251 6.71098 14.9717C8.02693 14.2315 9.89541 13.75 12.0001 13.75C14.1049 13.75 15.9733 14.2315 17.2893 14.9717C18.6288 15.7251 19.2501 16.6487 19.2501 17.5C19.2501 18.8078 19.2098 19.544 18.5265 20.1004C18.156 20.4022 17.5366 20.6967 16.4763 20.9113C15.4194 21.1252 13.9744 21.25 12.0001 21.25C10.0259 21.25 8.58087 21.1252 7.52393 20.9113C6.46366 20.6967 5.84425 20.4022 5.47372 20.1004C4.79045 19.544 4.75013 18.8078 4.75013 17.5Z"
            fill="#000000"
          ></path>
        </g>
      </svg>
    </section>
  </div>
  <!-- section filter -->
  <div class="section-filter">
        <section class="totals-procediments">
      <b>Procedimientos Totales: </b><span>{{ total }}</span>
    </section>
    <section class="totals-procediments">
      <b>Registros de Hoy: </b><span>{{ hoy }}</span>
    </section>
    <section class="filter-search">
      <label for=""><b>Parroquia:</b></label>
      <input
        type="search"
        name="Buscar"
        id="search-input-two"
        placeholder="Ubicacion"
      />
    </section>
        <section class="filter-search">
      <label for=""><b>Fecha:</b></label>
      <input
        type="number"
        name="Buscar"
        id="search-input"
        placeholder="DD-MM-AA"
      />
    </section>
        <section class="filter-search">
      <label for=""><b>Procedimientos:</b></label>
      <input
        type="search"
        name="Buscar"
        id="search-input-three"
        placeholder="Tipo"
      />
    </section>

  </div>
  <!-- tabla -->
  <div class="table-responsive-sm">
    <table class="table" id="data-table">
      <thead>
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Solicitante</th>
          <th scope="col">Jefe de comision</th>
          <th scope="col">Unidad</th>
          <th scope="col">Efectivos Enviados</th>
          <th scope="col">Parroquia</th>
          <th scope="col">Municipio</th>
          <th scope="col">Direccion</th>
          <th scope="col">Fecha</th>
          <th scope="col">Hora</th>
          <th scope="col">Tipo de procedimiento</th>
          <th scope="col">Acciones</th>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <!-- prettier-ignore -->
        {% for row in datos %}
        <tr>
          <!-- prettier-ignore -->
          <th scope="row">{{ forloop.counter }}</th>
          <!-- prettier-ignore -->
          <td>{{ row.id_solicitante.jerarquia }} {{ row.id_solicitante.nombres}} {{ row.id_solicitante.apellidos}}</td>
          <!-- prettier-ignore -->
          <td>{{ row.id_jefe_comision.jerarquia }} {{ row.id_jefe_comision.nombres}} {{ row.id_jefe_comision.apellidos}}</td>
          <!-- prettier-ignore -->
          <td>{{ row.unidad }}</td>
          <!-- prettier-ignore -->
          <td>{{ row.efectivos_enviados}}</td>
          {% if row.id_parroquia.parroquia != "Sin Registro" %}
          <td>{{ row.id_parroquia.parroquia }}</td>
          {% else %}
          <td>Otros Municipios</td>
          {% endif %}
          <!-- prettier-ignore -->
          <td>{{ row.id_municipio.municipio }}</td>
          <td>{{ row.direccion }}</td>
          <td>{{ row.fecha|date:"d-m-Y" }}</td>
          <td>{{ row.hora }}</td>
          <td>{{ row.id_tipo_procedimiento.tipo_procedimiento }}</td>
          <td class="icons-accion">
            <!-- NO TOCAR BOTON ELIMINAR-->
            <button
              type="button"
              class="button_delete"
              data-id="{{ row.id }}"
              data-id_mostrar="{{ forloop.counter }}"
              data-solicitante="{{ row.id_solicitante.jerarquia }} {{ row.id_solicitante.nombres}} {{ row.id_solicitante.apellidos}}"
              data-jefeComision="{{ row.id_jefe_comision.jerarquia }} {{ row.id_jefe_comision.nombres}} {{ row.id_jefe_comision.apellidos}}"
              data-fecha="{{ row.fecha|date:'d-m-Y'}}"
              data-tipoProcedimiento="{{ row.id_tipo_procedimiento.tipo_procedimiento }}"
              data-bs-toggle="modal"
              data-bs-target="#staticBackdrop"
            >
              <svg
                width="35px"
                height="35px"
                viewBox="0 0 1024 1024"
                class="icon"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                fill="#000000"
              >
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g
                  id="SVGRepo_tracerCarrier"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></g>
                <g id="SVGRepo_iconCarrier">
                  <path
                    d="M779.5 1002.7h-535c-64.3 0-116.5-52.3-116.5-116.5V170.7h768v715.5c0 64.2-52.3 116.5-116.5 116.5zM213.3 256v630.1c0 17.2 14 31.2 31.2 31.2h534.9c17.2 0 31.2-14 31.2-31.2V256H213.3z"
                    fill="#3688FF"
                  ></path>
                  <path
                    d="M917.3 256H106.7C83.1 256 64 236.9 64 213.3s19.1-42.7 42.7-42.7h810.7c23.6 0 42.7 19.1 42.7 42.7S940.9 256 917.3 256zM618.7 128H405.3c-23.6 0-42.7-19.1-42.7-42.7s19.1-42.7 42.7-42.7h213.3c23.6 0 42.7 19.1 42.7 42.7S642.2 128 618.7 128zM405.3 725.3c-23.6 0-42.7-19.1-42.7-42.7v-256c0-23.6 19.1-42.7 42.7-42.7S448 403 448 426.6v256c0 23.6-19.1 42.7-42.7 42.7zM618.7 725.3c-23.6 0-42.7-19.1-42.7-42.7v-256c0-23.6 19.1-42.7 42.7-42.7s42.7 19.1 42.7 42.7v256c-0.1 23.6-19.2 42.7-42.7 42.7z"
                    fill="#5F6379"
                  ></path>
                </g>
              </svg>
            </button>

            <!-- NO TOCAR Boton informacion-->
            <button
              type="button"
              class="button-info"
              data-id="{{ row.id }}"
              data-id_procedimiento="{{ row.id_tipo_procedimiento }}"
              id="view-info"
              data-bs-toggle="modal"
              data-bs-target="#modal-info"
            >
              <svg
                width="35px"
                height="35px"
                viewBox="0 0 1024 1024"
                class="icon"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                fill="#000000"
              >
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g
                  id="SVGRepo_tracerCarrier"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></g>
                <g id="SVGRepo_iconCarrier">
                  <path
                    d="M892.1 938.7H131.9c-17.8 0-35.1-3.5-51.4-10.4-15.6-6.6-29.7-16.1-41.9-28.2C26.5 888 17 873.9 10.3 858.2 3.5 841.8 0 824.5 0 806.8V217.2c0-17.8 3.5-35 10.4-51.3 6.6-15.7 16.1-29.8 28.2-41.9 12.2-12.2 26.3-21.7 42-28.3 16.2-6.9 33.5-10.4 51.3-10.4h83.4c23.6 0 42.7 19.1 42.7 42.7s-19.1 42.7-42.7 42.7h-83.4c-6.3 0-12.4 1.2-18.1 3.6-5.6 2.4-10.6 5.7-14.9 10-4.3 4.3-7.6 9.2-10 14.8-2.4 5.7-3.6 11.8-3.6 18.1v589.6c0 6.3 1.2 12.4 3.7 18.1 2.3 5.5 5.7 10.5 10 14.8 4.3 4.2 9.2 7.6 14.8 9.9 5.8 2.4 11.9 3.7 18.1 3.7h760.2c6.3 0 12.4-1.2 18.1-3.6 5.6-2.4 10.6-5.7 14.9-10 4.3-4.3 7.6-9.2 10-14.8 2.4-5.7 3.6-11.8 3.6-18.1V217.2c0-6.3-1.2-12.4-3.7-18.1-2.3-5.5-5.7-10.5-10-14.8-4.3-4.2-9.2-7.6-14.8-9.9-5.8-2.4-11.9-3.7-18.1-3.7h-83.4c-23.6 0-42.7-19.1-42.7-42.7s19.1-42.7 42.7-42.7h83.4c17.8 0 35.1 3.5 51.4 10.4 15.6 6.6 29.7 16.1 41.9 28.2 12.1 12.1 21.6 26.2 28.3 41.9 6.9 16.3 10.4 33.6 10.4 51.4v589.6c0 17.8-3.5 35-10.4 51.3-6.6 15.7-16.1 29.8-28.2 41.9-12.2 12.2-26.3 21.7-42 28.3-16.3 6.9-33.6 10.4-51.4 10.4z"
                    fill="#3688FF"
                  ></path>
                  <path
                    d="M229.8 714.8c-6.1 0-12.3-1.3-18.1-4.1-21.3-10-30.5-35.5-20.4-56.8L467.5 67.1c10-21.3 35.5-30.5 56.8-20.4 21.3 10 30.5 35.5 20.4 56.8L268.5 690.3c-7.3 15.4-22.7 24.5-38.7 24.5zM810.7 448H640c-23.6 0-42.7-19.1-42.7-42.7s19.1-42.7 42.7-42.7h170.7c23.6 0 42.7 19.1 42.7 42.7S834.2 448 810.7 448zM810.7 704h-384c-23.6 0-42.7-19.1-42.7-42.7s19.1-42.7 42.7-42.7h384c23.6 0 42.7 19.1 42.7 42.7S834.2 704 810.7 704z"
                    fill="#5F6379"
                  ></path>
                </g>
              </svg>
            </button>
          </td>
        </tr>
        <!-- prettier-ignore -->
        {% endfor %}
      </tbody>
    </table>
  </div>
  <!-- div general-dashboard fin -->
</div>
<!----------------------- Modal delete ---------------------------------->
<div
  class="modal fade"
  id="staticBackdrop"
  data-bs-backdrop="static"
  data-bs-keyboard="false"
  tabindex="-1"
  aria-labelledby="staticBackdropLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header config-modal-delete">
        <h2 class="modal-title fs-5" id="staticBackdropLabel">
          Eliminar Procedimiento
        </h2>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body modal-body-two">
        <div id="infoProcedimiento" class="infoProcedimientos"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cerrar
        </button>
        <button type="button" class="btn btn-danger" id="confirmarEliminar">
          Eliminar
        </button>
      </div>
    </div>
  </div>
</div>
<!----------------------- Modal Info ---------------------------------->
<div class="modal fade" tabindex="-1" id="modal-info">
  <div class="modal-dialog modal-xl">
    <div class="modal-content modal-content-two">
      <div class="modal-header header-dashboard-two">
        <section class="title-icon">
          <img
            src="../static/assets/logo bomberos 2.svg"
            alt="Logo de bomberos"
          />
          <h1>Cuerpo de Bomberos</h1>
        </section>
      </div>
      <div class="modal-body modal-body-two modal-body-three">
        <section class="info-modal" id="info_modal"></section>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">
          Cerrar
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Script informacion ventana modal -->
<script>
  // Obtener elementos
  const info_modal = document.getElementById("info_modal");

  document.querySelectorAll(".button-info").forEach((button) => {
    button.onclick = function () {
      const id = this.getAttribute("data-id");
      const id_tipo_procedimiento = this.getAttribute("data-id_procedimiento");

      fetch(`/api/procedimientos/${id}/`)
        .then((response) => response.json())
        .then((data) => {
          const baseInfo = `
            <article class="section-left">
              <section class="datos_division">
                <h4>Division</h4>
                <p><b>Division: </b> ${data.division}</p>
                <p><b>ID Procedimiento: </b> #${data.id}</p>
              </section>
              <section class="datos_operacion">
                <h4>Operacion</h4>
                <p><b>Solicitante: </b> ${data.solicitante}</p>
                <p><b>Jefe de Comision: </b> ${data.jefe_comision}</p>
                <p><b>Unidad Enviada: </b> ${data.unidad}</p>
                <p><b>Efectivos Enviados: </b> ${data.efectivos}</p>
              </section>
              <section class="datos_ubicacion">
                <h4>Ubicacion</h4>
                <p><b>Parroquia: </b> ${data.parroquia}</p>
                <p><b>Municipio: </b> ${data.municipio}</p>
                <p><b>Direccion: </b> ${data.direccion}</p>
                <p><b>Fecha: </b> ${data.fecha}</p>
                <p><b>Hora: </b> ${data.hora}</p>
              </section>`;

          const detailSections = {
            "Abastecimiento de agua": () => `
                <section class="detalles_procedimiento">
                  <h4>Detalles</h4>
                  ${generateCommonDetails(data)}
                </section>
                <section>
                  <h4>Comunidad</h4>
                  <p><b>Personas Atendidas: </b> ${data.personas_atendidas}</p>
                  <p><b>Nombre Persona Presente: </b> ${data.nombres}</p>
                  <p><b>Apellidos Persona Presente: </b> ${data.apellidos}</p>
                  <p><b>Cedula Persona Presente: </b> V-${data.cedula}</p>
                  <p><b>Litros de Agua Suministrada: </b> ${data.ltrs_agua}</p>
                </section>
              </section>`,

            "Apoyo a Otras Unidades": () => `
              <section class="detalles_procedimiento">
                <h4>Detalles</h4>
                ${generateCommonDetails(data, 'tipo_apoyo', 'unidad_apoyada')}
              </section>`,

            "Guardia de Prevencion": () => `
              <section class="detalles_procedimiento">
                <h4>Detalles</h4>
                ${generateCommonDetails(data, 'motivo_prevencion')}
              </section>`,

            "Atendido No Efectuado": () => `
              <section class="detalles_procedimiento">
                <h4>Detalles</h4>
                ${generateCommonDetails(data)}
              </section>`,

            "Despliegue de Seguridad": () => `
              <section class="detalles_procedimiento">
                <h4>Detalles</h4>
                ${generateCommonDetails(data, 'motivo_despliegue')}
              </section>`,

            "Fallecidos": () => `
              <section class="detalles_procedimiento">
                <h4>Detalles</h4>
                ${generateCommonDetails(data, 'motivo_fallecimiento')}
                <p><b>Nombre: </b> ${data.nombres}</p>
                <p><b>Apellido: </b> ${data.apellidos}</p>
                <p><b>Cedula: </b> ${data.cedula}</p>
                <p><b>Edad: </b> ${data.edad}</p>
                <p><b>Sexo: </b> ${data.sexo}</p>
              </section>`,

            "Falsa Alarma": () => `
              <section class="detalles_procedimiento">
                <h4>Detalles</h4>
                ${generateCommonDetails(data, 'motivo_alarma')}
              </section>`,

            "Servicios Especiales": () => `
              <section class="detalles_procedimiento">
                <h4>Detalles</h4>
                ${generateCommonDetails(data)}
              </section>`,

            "Rescate": () => `
              <section class="detalles_procedimiento">
                <h4>Detalles</h4>
                ${generateCommonDetails(data, 'tipo_rescate')}
              </section>
                ${data.tipo_rescate == "Animal" ? `<section class="detalles_rescate_animal">
                  <h4>Animal</h4>
                  <p><b>Especie: </b> ${data.especie}</p>
                  <p><b>Descripcion: </b> ${data.descripcion}</p>
              </section>` : ''}
                ${data.tipo_rescate == "Persona" ? `<section class="detalles_rescate_persona">
                  <h4>Persona </h4>
                  <p><b>Nombre: </b> ${data.nombres}</p>
                  <p><b>Apellido: </b> ${data.apellidos}</p>
                  <p><b>Cedula: </b> ${data.cedula}</p>
                  <p><b>Edad: </b> ${data.edad}</p>
                  <p><b>Sexo: </b> ${data.sexo}</p>
                  <p><b>Descripcion: </b> ${data.descripcion}</p>
              </section>` : ''}`,
              
            "Incendios": () => `
              <section class="detalles_procedimiento">
                <h4>Detalles</h4>
                ${generateCommonDetails(data, 'tipo_incendio')}
              </section>
                ${data.persona ? `<section class="detalles_persona_sitio">
                  <h4>Persona en el Sitio</h4>
                  <p><b>Nombre: </b> ${data.nombre}</p>
                  <p><b>Apellido: </b> ${data.apellidos}</p>
                  <p><b>Cedula: </b> ${data.cedula}</p>
                  <p><b>Edad: </b> ${data.edad}</p>
                </section>` : ''}
                ${data.vehiculo ? `<section class="detalles_vehiculo">
                  <h4>Vehiculo</h4>
                  <p><b>Modelo: </b> ${data.modelo}</p>
                  <p><b>Marca: </b> ${data.marca}</p>
                  <p><b>Color: </b> ${data.color}</p>
                  <p><b>Año: </b> ${data.año}</p>
                  <p><b>Placas: </b> ${data.placas}</p>
                </section>` : ''}`};

          const detalles = detailSections[id_tipo_procedimiento] ? detailSections[id_tipo_procedimiento]() : "<h2>Error</h2>";

          info_modal.innerHTML = baseInfo + detalles + '</article>';
        })
        .catch((error) => console.error("Error:", error));
    };
  });

  function generateCommonDetails(data, additionalField = '', additionalField2 = '') {
    return `
      <p><b>Tipo de Procedimiento: </b> ${data.tipo_procedimiento}</p>
      ${additionalField ? `<p><b>${additionalField.replace(/_/g, ' ').replace(/\b\w/g, c => c.toUpperCase())}: </b> ${data[additionalField]}</p>` : ''}
      ${additionalField2 ? `<p><b>${additionalField2.replace(/_/g, ' ').replace(/\b\w/g, c => c.toUpperCase())}: </b> ${data[additionalField2]}</p>` : ''}
      <p><b>Descripcion: </b> ${data.descripcion}</p>
      <p><b>Material Utilizado: </b> ${data.material_utilizado}</p>
      <p><b>Status: </b> ${data.status}</p>
    `;
  }
</script>

<!-- no tocar solo dios sabe como funciona -->
<script>
  // Obtener elementos
  const infoProcedimiento = document.getElementById("infoProcedimiento");
  const confirmarEliminar = document.getElementById("confirmarEliminar");

  // Abrir modal y mostrar información
  document.querySelectorAll(".button_delete").forEach((button) => {
    button.onclick = function () {
      const id = this.getAttribute("data-id");
      const id_mostrar = this.getAttribute("data-id_mostrar");
      const solicitante = this.getAttribute("data-solicitante");
      const jefe_comision = this.getAttribute("data-jefeComision");
      const fecha = this.getAttribute("data-fecha");
      const tipo_procedimiento = this.getAttribute("data-tipoProcedimiento");
      infoProcedimiento.innerHTML = `
      <p><b>ID: </b>${id_mostrar} </p>
      <p><b>Solicitante:</b> ${solicitante}</p>
      <p><b>Jefe de Comision:</b> ${jefe_comision}</p>
      <p><b>Fecha:</b> ${fecha}</p>
      <p><b>Tipo De Procedimiento:</b> ${tipo_procedimiento}</p>`;
      confirmarEliminar.setAttribute("data-id", id);
    };
  });

  // Confirmar eliminación
  confirmarEliminar.onclick = function () {
    const id = this.getAttribute("data-id");
    eliminarProcedimiento(id);
  };

  // Función para eliminar procedimiento
  function eliminarProcedimiento(id) {
    fetch("/operaciones/", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "X-CSRFToken": getCookie("csrftoken"), // Asegúrate de incluir el token CSRF
      },
      body: JSON.stringify({ id: id }),
    })
      .then((response) => response.json())
      .then((data) => {
        if (data.success) {
          // Eliminar el procedimiento de la vista
          document
            .querySelector(`button[data-id="${id}"]`)
            .parentElement.remove();
          location.reload();
        } else {
          alert("Error al eliminar el procedimiento");
        }
      });
  }

  // Función para obtener el token CSRF
  function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== "") {
      const cookies = document.cookie.split(";");
      for (let i = 0; i < cookies.length; i++) {
        const cookie = cookies[i].trim();
        if (cookie.substring(0, name.length + 1) === name + "=") {
          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
          break;
        }
      }
    }
    return cookieValue;
  }
</script>

<!-- Script de filtrado de tablas -->
<script>
(function() {
  function setupSearch(inputId, columnIndex) {
    document.getElementById(inputId).addEventListener('input', function() {
      const filter = this.value.toLowerCase();
      const rows = document.querySelectorAll('#data-table tbody tr');

      rows.forEach(row => {
        const dateCell = row.querySelector(`td:nth-child(${columnIndex})`);
        const originalText = dateCell.textContent;
        const dateText = originalText.toLowerCase();

        if (dateText.includes(filter)) {
          const startIndex = dateText.indexOf(filter);
          const endIndex = startIndex + filter.length;

          // Crear un nuevo span para la parte resaltada
          const highlightedText = document.createElement('span');
          highlightedText.style.backgroundColor = 'yellow';
          highlightedText.textContent = originalText.substring(startIndex, endIndex);

          // Crear un contenedor para el texto resaltado y el resto del texto
          const beforeText = document.createTextNode(originalText.substring(0, startIndex));
          const afterText = document.createTextNode(originalText.substring(endIndex));

          dateCell.innerHTML = ''; // Limpiar el contenido anterior
          dateCell.appendChild(beforeText);
          dateCell.appendChild(highlightedText);
          dateCell.appendChild(afterText);
          row.style.display = '';
        } else {
          dateCell.innerHTML = originalText; // Resetear cualquier resaltado previo
          row.style.display = 'none';
        }
      });
    });
  }

  // Llamar a la función para cada input y su columna correspondiente
  setupSearch('search-input', 9);
  setupSearch('search-input-two', 6);
  setupSearch('search-input-three', 11);
})();

</script>
{% endblock %}
